<template>
  <div ref="dom"></div>
</template>

<script>
import echarts from 'echarts'
import { on, off } from '@/libs/tools'

export default {
  name: 'serviceRequests',
  data () {
    return {
      dom: null,
      data: ['2019-07-30',
        '2019-07-31',
        '2019-08-01',
        '2019-08-04',
        '2019-08-05',
        '2019-08-06',
        '2019-08-07',
        '2019-08-08',
        '2019-08-09',
        '2019-08-10',
        '2019-08-11',
        '2019-08-12',
        '2019-08-13',
        '2019-08-14',
        '2019-08-15',
        '2019-08-16',
        '2019-08-17',
        '2019-08-18',
        '2019-08-19',
        '2019-08-20',
        '2019-08-21',
        '2019-08-22',
        '2019-08-23',
        '2019-08-24',
        '2019-08-26',
        '2019-08-27',
        '2019-08-28',
        '2019-08-29',
        '2019-08-30',
        '2019-08-31',
        '2019-09-01',
        '2019-09-02',
        '2019-09-03',
        '2019-09-04',
        '2019-09-05',
        '2019-09-06',
        '2019-09-07',
        '2019-09-08',
        '2019-09-09',
        '2019-09-10',
        '2019-09-11',
        '2019-09-12',
        '2019-09-13',
        '2019-09-14',
        '2019-09-15',
        '2019-09-16',
        '2019-09-17',
        '2019-09-18',
        '2019-09-19',
        '2019-09-20',
        '2019-09-21',
        '2019-09-22',
        '2019-09-23',
        '2019-09-24',
        '2019-09-25',
        '2019-09-26',
        '2019-09-27',
        '2019-09-28',
        '2019-09-30',
        '2019-10-01',
        '2019-10-02',
        '2019-10-03',
        '2019-10-04',
        '2019-10-05',
        '2019-10-06',
        '2019-10-07',
        '2019-10-08',
        '2019-10-09'],
      goods: ['1',
        '15',
        '27',
        '4',
        '13',
        '22',
        '42',
        '47',
        '30',
        '73',
        '19',
        '36',
        '26',
        '18',
        '39',
        '24',
        '28',
        '5',
        '1',
        '7',
        '26',
        '13',
        '12',
        '16',
        '15',
        '6',
        '37',
        '6',
        '5',
        '16',
        '2',
        '23',
        '43',
        '58',
        '9',
        '11',
        '12',
        '26',
        '15',
        '15',
        '50',
        '28',
        '2',
        '8',
        '19',
        '6',
        '37',
        '2',
        '27',
        '5',
        '2',
        '6',
        '22',
        '7',
        '23',
        '14',
        '10',
        '29',
        '1',
        '6',
        '5',
        '3',
        '4',
        '17',
        '10',
        '27',
        '13',
        '8'],
      money: ['0.01',
        '1756.00',
        '3035.00',
        '402.00',
        '991.00',
        '847.00',
        '1774.00',
        '563.81',
        '1215.00',
        '584.00',
        '1062.00',
        '1380.00',
        '1392.00',
        '870.00',
        '2016.00',
        '1459.00',
        '1565.00',
        '51.00',
        '375.00',
        '867.00',
        '704.00',
        '2593.00',
        '734.00',
        '714.00',
        '562.00',
        '617.00',
        '1017.00',
        '424.00',
        '992.00',
        '1116.00',
        '750.00',
        '983.00',
        '2273.00',
        '2198.00',
        '394.00',
        '984.00',
        '673.00',
        '1480.00',
        '1174.00',
        '714.00',
        '4223.00',
        '1012.00',
        '930.00',
        '598.00',
        '1326.00',
        '294.00',
        '1849.00',
        '90.00',
        '1655.00',
        '964.00',
        '45.00',
        '252.00',
        '1274.00',
        '357.00',
        '1286.00',
        '495.00',
        '612.00',
        '971.00',
        '78.00',
        '687.00',
        '951.00',
        '945.00',
        '146.00',
        '630.00',
        '274.00',
        '1240.00',
        '1067.00',
        '108.00'],
      returnMoney: ['0.00',
        '0.00',
        '1063.00',
        '10.00',
        '111.00',
        '26.00',
        '0.00',
        '6.11',
        '0.00',
        '75.00',
        '0.00',
        '0.00',
        '0.00',
        '6.00',
        '0.00',
        '0.00',
        '0.00',
        '3.00',
        '0.00',
        '18.00',
        '6.00',
        '5.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '480.00',
        '25.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '990.00',
        '372.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '848.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '682.00',
        '0.00',
        '6.00',
        '19.00',
        '6.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00',
        '0.00'],
      oddNum: [1,
        13,
        20,
        4,
        7,
        3,
        18,
        33,
        9,
        9,
        3,
        3,
        7,
        7,
        9,
        5,
        5,
        2,
        1,
        6,
        8,
        10,
        3,
        3,
        3,
        4,
        25,
        5,
        3,
        3,
        2,
        4,
        7,
        9,
        2,
        3,
        3,
        7,
        4,
        3,
        13,
        3,
        2,
        2,
        4,
        2,
        12,
        2,
        7,
        5,
        2,
        1,
        4,
        1,
        4,
        3,
        6,
        6,
        1,
        3,
        4,
        3,
        1,
        4,
        2,
        4,
        4,
        2]
    }
  },
  methods: {
    resize () {
      this.dom.resize()
    }
  },
  mounted () {
    const option = {
      title: {
        text: '订单数据统计图',
        x: 'center'
      },
      tooltip: {
        trigger: 'axis',
        axisPointer: {
          type: 'cross',
          label: {
            backgroundColor: '#6a7985'
          }
        }
      },
      legend: {
        data: ['商品数量', '订单数量', '订单金额', '退款金额'],
        x: 'left'
      },
      grid: {
        top: '15%',
        left: '1.2%',
        right: '1%',
        bottom: '5%',
        containLabel: true
      },
      dataZoom: [{
        type: 'inside'
      }, {
        handleStyle: {
          shadowBlur: 3,
          shadowColor: 'rgba(0, 0, 0, 0.6)',
          shadowOffsetX: 2,
          shadowOffsetY: 2
        }
      }],

      xAxis: [
        {
          type: 'category',
          boundaryGap: false,
          data: this.data
        }
      ],
      yAxis: [
        {
          type: 'value'
        }
      ],
      series: [
        {
          name: '商品数量',
          type: 'line',
          stack: '总量',
          data: this.goods
        },
        {
          name: '订单数量',
          type: 'line',
          stack: '总量',
          data: this.oddNum
        },
        {
          name: '订单金额',
          type: 'line',
          stack: '总量',
          data: this.money
        },
        {
          name: '退款金额',
          type: 'line',
          stack: '总量',
          data: this.returnMoney
        }
      ]
    }
    this.$nextTick(() => {
      this.dom = echarts.init(this.$refs.dom)
      this.dom.setOption(option)
      on(window, 'resize', this.resize)
    })
  },
  beforeDestroy () {
    off(window, 'resize', this.resize)
  }
}
</script>
